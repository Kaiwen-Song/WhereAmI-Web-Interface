<!DOCTYPE HTML>
<html>

<head>
  <script src = "fabric.js"> </script>
  <script src="http://rubaxa.github.io/Sortable/Sortable.js"></script>
  <style>
  #floor_list { list-style-type: none; margin: 0; padding: 0; width: 60%; }
  #floor_list li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px; }
  #floor_list li span { position: absolute; margin-left: -1.3em; }
  </style>
  <script>
  var canvas = new fabric.Canvas("image");
  var floor_list = document.getElementById("floor_list");
  var editable_list = Sortable.create(floor_list, {
    filter: '.js-remove',
    onFilter: function (evt) {
    var el = editableList.closest(evt.item); // get dragged item
    el && el.parentNode.removeChild(el);


}
  });

  var floor_array = [];

  document.getElementById("floor_plan").onchange = function handleImage(e){
    var reader = new FileReader();
    console.log("got here");
    reader.onload = function (event){
      var imgObj = new Image();
      imgObj.src = event.target.result;
      imgObj.onload = function() {
        var image = new fabric.Image(imgObj);
        image.set({
        angle: 0,
        padding: 10,
        cornersize:10,
        height:500,
        width:500,
        });
        canvas.centerObject(image);
        canvas.add(image);
        canvas.renderAll();
      }
    }
    reader.readAsDataURL(e.target.files[0]);

  };



  </script>
</head>
<body>
  <div id = "progress_bar_div">
    <ol class="progress_bar">
      <li class="step active"><span class="step-name">Building</span></li>
      <li class="step"><span class="step-name">Configure Floors</span></li>
      <li class="step"><span class="step-name">Configure Beacons</span></li>
      <li class="step"><span class="step-name">Training Data</span></li>
      <li class="step"><span class="step-name">Confirmation</span></li>
    </ol>
  </div>

  <div id = "canvas_div">
    <canvas id = "image" width=500 height=500 style="border:1px solid #000000;"></canvas>
    <input id = "floor_plan" type = "file" accept = "image/*">
  </div>

  <div id = "floor_list_div">
    <ul id = "floor_list">
      <li>elem 1</li>
      <li>elem 2</li>
      <li>elem 3</li>
    </ul>

  </div>



</body>

</html>
