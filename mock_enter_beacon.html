<!DOCTYPE HTML>
<html>

<head>
  <script src = "fabric.js"></script>
</head>
<body>

  <div id = "ProgressBar">
    <ol class="progress_bar">
      <li class="step active"><span class="step-name">Building</span></li>
      <li class="step"><span class="step-name">Configure Floors</span></li>
      <li class="step"><span class="step-name">Configure Beacons</span></li>
      <li class="step"><span class="step-name">Training Data</span></li>
      <li class="step"><span class="step-name">Confirmation</span></li>
    </ol>
  </div>
  <div id = "floor_map_div">
    <canvas id = "floor_map_canvas" width = 500 height = 500 style = "border:1px solid black;"></canvas>
  </div>
  <div class = "floor_list_div">
    <ol id="floor_list">
      <li class="ui-widget-content">Item 1</li>
      <li class="ui-widget-content">Item 2</li>
      <li class="ui-widget-content">Item 3</li>
      <li class="ui-widget-content">Item 4</li>
      <li class="ui-widget-content">Item 5</li>
      <li class="ui-widget-content">Item 6</li>
      <li class="ui-widget-content">Item 7</li>
    </ol>
  </div>

  <div class = "beacon_list_div">
    <ol id = "beacon_list">

    </ol>
  </div>

  <script>
    var canvas = new fabric.Canvas("floor_map_canvas");
    canvas.addOnAddRemove = true;
    canvas.selection = false;
    var circ = new fabric.Circle({ radius: 10, fill: '#f55', top: 100, left: 100 });
    canvas.add(circ);
    circ.lockMovementY = true;
    circ.lockMovementX = true;
    circ.hasControls = false;
    canvas.setBackgroundColor('#011', canvas.renderAll.bind(canvas));

    canvas.on('mouse:down', function(options){
     var text = document.getElementById("floor_list");
     if(options.target){
     }
     else {


      var pointer = canvas.getPointer(options.e);
      var nc = new fabric.Circle({ radius: 10, fill: '#fff', top: pointer.y, left: pointer.x });
      console.log("clicked");
      canvas.add(nc);

      text.value = "touched";
      nc.lockMovementY = true;
      nc.lockMovementX = true;
      nc.hasControls = false;
      canvas.renderAll();
      nc.on('selected', function(){
        canvas.remove(nc);
        canvas.renderAll();
      });

      }
    })

  </script>
</body>
</html>
